<ndm-page
    class="page-kvas-ui"
    label="KVAS UI"
    progress="vm.progress"
    description=" "
>
    <ndm-details
        label-visible="{{ vm.l10n.backendSettings.hide }}"
        label-hidden="{{ vm.l10n.backendSettings.show }}"
        toggle-var="vm.ui.isBackendSettingsBlockExpanded"
    >
        <form
            class="backend-settings"
            name="vm.settingsForm"
        >
            <ndm-input
                name="kvasBackendAddress"
                label="{{ vm.l10n.backend.address }}"
                model="vm.backendConnection.data.address"
                validation="address"
                max-length="256"
            >
            </ndm-input>

            <ndm-input
                name="kvasBackendUsername"
                label="{{ vm.l10n.backend.username }}"
                model="vm.backendConnection.data.username"
                validation="login"
            >
            </ndm-input>

            <ndm-input
                name="kvasBackendPassword"
                label="{{ vm.l10n.backend.password }}"
                model="vm.backendConnection.data.password"
                password="true"
                validation="password"
            >
            </ndm-input>

            <ndm-button
                is-disabled="!vm.backendConnection.data.address"
                on-click="vm.testBackendConnection"
                label="{{ vm.l10n.backend.testConnectionBtn }}"
            >
            </ndm-button>
        </form>
    </ndm-details>

    <br/>

    <pre>
        {{ vm.latestResponse | json }}
    </pre>

    <br/>
    <br/>

    <div class="page-kvas-ui__unblock-list unblock-list">
        <div class="unblock-list__toolbar">
            <ndm-button
                on-click="vm.refreshUnblockList"
                label="{{vm.l10n.unblockList.refresh }}"
            >
            </ndm-button>

            <ndm-button
                on-click="vm.addHostToUnblock"
                label="{{vm.l10n.unblockList.addHost }}"
            >
            </ndm-button>
        </div>


        <div class="unblock-list">
            <div
                ng-repeat="item in vm.list"
                class="unblock-list__item"
            >
                {{ item }}
            </div>
        </div>
    </div>

</ndm-page>